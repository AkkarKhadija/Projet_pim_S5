with Ada.Text_IO;               use Ada.Text_IO;
with Ada.Integer_Text_IO;       use Ada.Integer_Text_IO;
with Ada.Strings.Unbounded;     use Ada.Strings.Unbounded;
with Ada.Text_IO.Unbounded_IO; use  Ada.Text_IO.Unbounded_IO;
with Routeur_Simple;

package Routeur_LL is

   type T_Cache_L is limited private;

   -- Initialiser le cache
   procedure Init_Cache (Cache : in out T_Cache_L) with
     post => Cache = null;

   -- Quelle est la taille du Cache
   function Taille_Cache (Cache : in  T_Cache_L) return Integer with
     post => Taille_Cache'Result >= 0;

   -- Chercher l'interface convenable dans le cache
   procedure Chercher_Cache (Cache : in T_Cache_L);

   -- Enregistrer une nouvelle route dans le Cache
   procedure Enregistrer_Cache_L (Cache : in out T_Cache_L; D : in T_Adresse_IP; M : in T_Adresse_IP; I : in Unbounded_String) with
     post => Cache /= null;

   -- Afficher le contenu du cache
   procedure Afficher_Cache_L (Cache : in T_Cache_L);

   -- chercher la bonne route et remplir le ficher resultats.txt
   procedure Donner_Resultats_CL (Table : in  T_Table; Cache : in out T_Cache_L);

   -- Vider le cache en utilisant la politique FIFO
   procedure Vider_Cache_FIFO (Cache : in out T_Cache_L);

   -- Vider le cache en utilisant la politique LFU
   procedure Vider_Cache_LFU (Cache : in out T_Cache_L);

   -- Vider le cache en utilisant la politique LRU
   procedure Vider_Cache_LRU (Cache : in out T_Cache_L);

private

   type T_Route_CL;
   type T_Cache_L is access T_Route_CL;
   type T_Route_CL is record
      Destination : T_Adresse_IP;
      Masque      : T_Adresse_IP;
      Interface_T : Unbounded_String;
      Frequence   : Integer;
      Temps       : Duration;
      Suivante    : T_Cache_L;
   end record;
end Routeur_LL;
